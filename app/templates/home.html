{% extends 'base.html' %}

{% block title %}ArtNails Academy{% endblock %}

{% block content %}

<!-- HERO -->
<section class="hero-block" style="margin-top: 83px;">
    <img src="{{ url_for('static', filename='img/hero-bg.jpg') }}" alt="Фон" class="hero-bg">

    <div class="hero-content">
        <h1 class="hero-title">
            <span class="white-text">Become a professional</span>
            <span class="pink-text">nail artist</span>
        </h1>
        <p class="hero-subtext">
            Learn the art of manicure with top instructors. Get certified and start a successful career in beauty industry.
        </p>
        <div class="hero-buttons">
            <a href="{{ url_for('catalog.catalog') }}" class="btn-hero btn-catalog">
                Каталог курсов
            </a>
            <button class="btn-hero btn-register-hero"
                    onclick="window.location.href='{{ url_for('enroll.enroll_page') }}'">
                Записаться
            </button>

        </div>
    </div>
</section>

<!-- ПОЧЕМУ МЫ -->
<section class="why-us-block">
    <div class="container">
        <h2 class="why-us-title">Почему выбирают нас?</h2>
        <p class="why-us-subtext">
            Мы предлагаем качественное образование с практическим подходом и поддержкой на каждом этапе обучения
        </p>

        <div class="why-us-cards">
            <div class="card">
                <div class="card-icon">
                    <img src="{{ url_for('static', filename='icons/icon1.svg') }}">
                </div>
                <h3 class="card-title">Гибкий доступ</h3>
                <p class="card-desc">Учитесь в удобное время в онлайн-формате</p>
            </div>

            <div class="card">
                <div class="card-icon">
                    <img src="{{ url_for('static', filename='icons/icon2.svg') }}">
                </div>
                <h3 class="card-title">Поддержка сообщества</h3>
                <p class="card-desc">Общение с единомышленниками и наставниками</p>
            </div>

            <div class="card">
                <div class="card-icon">
                    <img src="{{ url_for('static', filename='icons/icon3.svg') }}">
                </div>
                <h3 class="card-title">Эксперты-инструкторы</h3>
                <p class="card-desc">Обучение у лучших мастеров индустрии</p>
            </div>

            <div class="card">
                <div class="card-icon">
                    <img src="{{ url_for('static', filename='icons/icon4.svg') }}">
                </div>
                <h3 class="card-title">Сертификация</h3>
                <p class="card-desc">Официальный сертификат после курса</p>
            </div>
        </div>
    </div>
</section>

<!-- ПОПУЛЯРНЫЕ КУРСЫ -->
<section class="popular-courses-block">
    <h2 class="popular-title">Популярные курсы</h2>
    <p class="popular-subtitle">
        Выберите курс, который подходит вашему уровню подготовки
    </p>

    <div class="courses-container">
        {% for course in popular_courses %}
        <div class="course-card public-course-card">

            <img src="{{ url_for('static', filename=course.image) }}"
                 alt="{{ course.title }}"
                 class="course-img">

            <div class="course-top-info">
                <span class="course-level">{{ course.difficulty }}</span>
                <span class="course-duration">{{ course.duration_weeks }} недели</span>
            </div>

            <h3 class="course-name">{{ course.title }}</h3>

            <p class="course-desc">
                {{ course.short_description }}
            </p>

            <span class="course-price">
                {{ course.price }} BYN
            </span>

            <a href="{{ url_for('course_desk.course_page', id_course=course.id_course) }}"
               class="btn-course-details">
                Подробнее
            </a>

        </div>
        {% endfor %}
    </div>

    <div class="all-courses-container">
        <a href="{{ url_for('catalog.catalog') }}" class="btn-all-courses">
            Все курсы →
        </a>
    </div>
</section>

<!-- ЗАПИСЬ -->
<section class="start-learning-block">
    <h2 class="start-title">Готовы начать обучение?</h2>
    <p class="start-subtitle">
        Присоединяйтесь к тысячам успешных мастеров
    </p>

    <div class="start-buttons">
        <button class="btn-start" onclick="window.location.href='{{ url_for('enroll.enroll_page') }}'">
            <img src="{{ url_for('static', filename='icons/icon-apply.svg') }}" class="btn-icon">
            Записаться на курс
        </button>

        <a href="{{ url_for('catalog.catalog') }}" class="btn-choose btn-catalog">
            <img src="{{ url_for('static', filename='icons/catalog-icon.svg') }}" class="btn-icon">
            Выбрать курс
        </a>
    </div>
</section>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const params = new URLSearchParams(window.location.search);
    if (params.get("payment") === "success") {
        alert("Оплата прошла успешно!");
    } else if (params.get("payment") === "cancel") {
        alert("Оплата не была завершена или произошла ошибка.");
    }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {

    // ==========================
    // Hero Block
    // ==========================
    const heroTitleWords = document.querySelectorAll(".hero-title span");
    const heroSub = document.querySelector(".hero-subtext");
    const heroButtons = document.querySelectorAll(".hero-buttons .btn-hero");
    const heroBg = document.querySelector(".hero-bg");

    // Hero text animation
    heroTitleWords.forEach((word, i) => {
        setTimeout(() => {
            word.style.opacity = 1;
            word.style.transform = "translateY(0)";
        }, i * 400);
    });

    setTimeout(() => {
        heroSub.style.opacity = 1;
        heroSub.style.transform = "translateY(0)";
    }, heroTitleWords.length * 400);

    heroButtons.forEach((btn, i) => {
        setTimeout(() => {
            btn.style.opacity = 1;
            btn.style.transform = "translateY(0)";
        }, heroTitleWords.length * 400 + i * 200);
    });

    // Parallax background
    window.addEventListener('scroll', () => {
        let offset = window.scrollY;
        heroBg.style.transform = `translateY(${offset * 0.2}px) scale(1.05)`;
    });

    // ==========================
    // Utility: check if element is in viewport
    // ==========================
    function isInViewport(el) {
        const rect = el.getBoundingClientRect();
        return rect.top < window.innerHeight - 50;
    }

    // ==========================
    // Cards "Почему выбирают нас"
    // ==========================
    const cards = document.querySelectorAll(".card");
    function revealCards() {
        cards.forEach((card, i) => {
            if (isInViewport(card)) {
                setTimeout(() => {
                    card.style.opacity = 1;
                    card.style.transform = "translateY(0)";
                    const title = card.querySelector(".card-title");
                    const desc = card.querySelector(".card-desc");
                    setTimeout(() => { title.style.opacity = 1; title.style.transform = "translateY(0)"; }, 100);
                    setTimeout(() => { desc.style.opacity = 1; desc.style.transform = "translateY(0)"; }, 300);
                }, i * 200);
            }
        });
    }
    window.addEventListener("scroll", revealCards);
    revealCards();

    // ==========================
    // Popular Courses
    // ==========================
    const courseCards = document.querySelectorAll(".public-course-card");
    function revealCourses() {
        courseCards.forEach((card, i) => {
            if (isInViewport(card)) {
                setTimeout(() => {
                    card.classList.add("visible");

                    const name = card.querySelector(".course-name");
                    const desc = card.querySelector(".course-desc");
                    const price = card.querySelector(".course-price");
                    const btn = card.querySelector(".btn-course-details");

                    setTimeout(() => { name.style.opacity = 1; name.style.transform = "translateY(0)"; }, 100);
                    setTimeout(() => { desc.style.opacity = 1; desc.style.transform = "translateY(0)"; }, 300);
                    setTimeout(() => { price.style.opacity = 1; price.style.transform = "translateY(0)"; }, 500);
                    setTimeout(() => { btn.style.opacity = 1; btn.style.transform = "translateY(0)"; }, 700);
                }, i * 300);
            }
        });
    }
    window.addEventListener("scroll", revealCourses);
    revealCourses();

    // ==========================
    // Start Learning Block
    // ==========================
    const startTitle = document.querySelector(".start-title");
    const startSub = document.querySelector(".start-subtitle");
    const startButtons = document.querySelectorAll(".start-buttons .btn-start, .start-buttons .btn-choose");

    function revealStartBlock() {
        if (isInViewport(startTitle)) {
            startTitle.style.opacity = 1;
            startTitle.style.transform = "translateY(0)";
            setTimeout(() => {
                startSub.style.opacity = 1;
                startSub.style.transform = "translateY(0)";
            }, 200);
            startButtons.forEach((btn, i) => {
                setTimeout(() => {
                    btn.style.opacity = 1;
                    btn.style.transform = "translateY(0)";
                }, 400 + i * 150);
            });
        }
    }

    window.addEventListener("scroll", revealStartBlock);
    revealStartBlock();
});

</script>

{% endblock %}
